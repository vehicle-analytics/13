// expense-categories.js
// –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –≤–∏—Ç—Ä–∞—Ç –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–æ—ó –ø–∞–Ω–µ–ª—ñ –∞–≤—Ç–æ

const EXPENSE_CATEGORIES = {
    '–¢–û —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è': [
        /–º–∞—Å–ª\w*/i,
        /—Ñ—ñ–ª—å—Ç—Ä\w*/i,
        /–æ–ª–∏–≤\w*/i,
        /—Ç–æ\b/i,
        /—Ç–µ—Ö–Ω—ñ—á–Ω–µ\s*–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è/i,
        /—Ç–µ—Ö–æ–≥–ª—è–¥/i,
        /—Å–µ—Ä–≤—ñ—Å–Ω/i,
        /–∑–∞–º—ñ–Ω–∞\s*–º–∞—Å–ª–∞/i,
        /—Ç–µ—Ö–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è/i,
        /—Å–µ—Ä–≤—ñ—Å/i,
        /–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è/i,
        /—Ç–µ—Ö–Ω—ñ—á–Ω–∏–π/i,
        
        // –°–∏—Å—Ç–µ–º–∞ –ì–†–ú (–ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∑ –æ–∫—Ä–µ–º–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)
        /–≥—Ä–º\b/i,
        /—Ä–µ–º—ñ–Ω\w*/i,
        /—Ä–æ–ª–∏–∫\w*/i,
        /–ø–æ–º–ø\w*/i,
        /—Ä–µ–º–µ–Ω—å/i,
        /–≥—Ä–º.*—Ä–µ–º/i,
        /—Ä–æ–ª–∏–∫.*–≥—Ä–º/i,
        /–ø–æ–º–ø–∞.*–≥—Ä–º/i,
        /timing\s*belt/i,
        /—Ä–µ–º–µ–Ω—å\s*–≥—Ä–º/i,
        /—Ä–µ–º–∫–æ–º–ø–ª–µ–∫—Ç\s*–≥—Ä–º/i,
        /—Ä–µ–º–µ–Ω—å.*—Ä–∞—Å–ø—Ä–µ–¥/i
    ],
    
    '–ì–∞–ª—å–º—ñ–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞': [
        /–≥–∞–ª—å–º\w*/i,
        /–∫–æ–ª–æ–¥–∫\w*/i,
        /—Ç–æ—Ä–º–æ–∑/i,
        /—Å—É–ø–æ—Ä—Ç/i,
        /—Ü–∏–ª—ñ–Ω–¥—Ä\s*–≥–∞–ª—å–º/i,
        /—Ç–æ—Ä–º–æ–∑–Ω/i,
        /–≥–∞–ª—å–º—ñ–≤–∫–∞/i,
        /–Ω–∞–ø—Ä–∞–≤–ª—è—é—á/i,
        /—Ä–µ–º–∫–æ–º–ª–µ–∫—Ç\s*—Å—É–ø/i,
        /–≥–∞–ª—å–º—ñ–≤–Ω–∏–π/i,
        /—Å—Ç–æ–ø/i,
        /brake/i,
        /—Ç–æ—Ä–º–æ–∑–Ω–æ–π/i,
        /—Ç–æ—Ä–º–æ–∑–∫–∞/i
    ],
    
    '–•–æ–¥–æ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞': [
        /–∞–º–æ—Ä—Ç–∏–∑–∞—Ç–æ—Ä\w*/i,
        /–ø—ñ–¥–≤—ñ—Å–∫\w*/i,
        /–ø–æ–¥–≤–µ—Å–∫\w*/i,
        /—Ö–æ–¥–æ–≤\w*/i,
        /–ø—Ä—É–∂–∏–Ω\w*/i,
        /—Å—Ç–æ–π–∫\w*/i,
        /—Å–∞–π–ª–µ–Ω—Ç–±–ª–æ–∫/i,
        /—à–∞—Ä–æ–≤\w*/i,
        /—Ä—É–ª—å–æ–≤\w*/i,
        /—Ä—É–ª—å\w*/i,
        /—Ç—è–≥\w*/i,
        /–Ω–∞–∫–æ–Ω–µ—á–Ω–∏–∫/i,
        /–æ–ø–æ—Ä\w*/i,
        /–≤–∞–∂—ñ–ª/i,
        /–ø—ñ–¥–≤—ñ—Å/i,
        /—Å—Ç–∞–±—ñ–ª—ñ–∑/i,
        /–≤—Ç—É–ª–∫\w*/i,
        /–ø—ñ–¥—à–∏–ø–Ω–∏–∫/i,
        /–ø—ñ–¥–≤—ñ—Å–∫–∞/i,
        
        // –®–∏–Ω–∏ —Ç–∞ –¥–∏—Å–∫–∏
        /—à–∏–Ω\w*/i,
        /–∫–æ–ª–µ—Å\w*/i,
        /–ø–æ–∫—Ä–∏—à–∫\w*/i,
        /–¥–∏—Å–∫\s*–∫–æ–ª–µ—Å/i,
        /—à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂/i,
        /–∫–æ–ª–µ—Å–æ/i,
        /—à–∏–Ω–∞/i,
        /–ø–æ–∫—Ä–∏—à–∫–∞/i,
        /—à–∏–ø/i,
        /–ª–∏—Ç–∏–π/i,
        /—à—Ç–∞–º–ø/i,
        /–∫–æ–ª–µ—Å–Ω—ã–π/i,
        /–¥–∏—Å–∫.*–∫–æ–ª–µ—Å/i,
        /–ø–æ–∫—Ä—ã—à–∫–∞/i,
        /–∫–æ–ª–µ—Å–∞/i,
        
        // –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞ –≥–µ–æ–º–µ—Ç—Ä—ñ—è
        /–¥–∏–∞–≥–Ω–æ—Å—Ç\w*/i,
        /—Ä–æ–∑–≤–∞–ª/i,
        /—Å—Ö–æ–¥–∂–µ–Ω–Ω—è/i,
        /–±–∞–ª–∞–Ω—Å\w*/i,
        /–≥–µ–æ–º–µ—Ç—Ä—ñ—è\w*/i,
        /—Ä–∞–∑–≤–∞–ª/i,
        /–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/i,
        /—Å—Ö–æ–¥–∂–µ–Ω–Ω—è/i,
        /–≥–µ–æ–º–µ—Ç—Ä–∏—è/i,
        /–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/i,
        /—Ö—ñ–¥–æ–≤–∞\s*–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞/i,
        /–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞\s*—Ö–æ–¥–æ–≤–æ—ó/i,
        /–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞.*–ø—ñ–¥–≤—ñ—Å–∫/i,
        /diagnostic/i
    ],
    
    '–î–≤–∏–≥—É–Ω': [
        /–¥–≤–∏–≥—É–Ω\w*/i,
        /–º–æ—Ç–æ—Ä\w*/i,
        /–∫–æ–ª—ñ–Ω–≤–∞–ª\w*/i,
        /–∫–æ–ª–µ–Ω–≤\w*/i,
        /–ø–æ—Ä—à–Ω\w*/i,
        /–∫–ª–∞–ø–∞–Ω\w*/i,
        /—Ü–∏–ª—ñ–Ω–¥—Ä\w*/i,
        /–≥–æ–ª–æ–≤–∫\w*\s*–±–ª–æ–∫/i,
        /–≥–±—Ü/i,
        /—Ä–∞—Å–ø—Ä–µ–¥–≤–∞–ª/i,
        /—Ä–∞—Å–ø—Ä–µ–¥/i,
        /—à–∞—Ç—É–Ω/i,
        /—Ä–æ–∑–ø–æ–¥—ñ–ª—å—á/i,
        /\b–≤–∞–ª\b/i,
        /–¥–≤–∏–≥—É–Ω–∞/i,
        /engine/i,
        /–º–æ—Ç–æ—Ä/i,
        /–¥–≤–∏–≥–∞—Ç–µ–ª—å/i,
        /–∫–æ–ª–µ–Ω–≤–∞–ª/i,
        /—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç–µ–ª—å–Ω—ã–π/i
    ],
    
    '–ï–ª–µ–∫—Ç—Ä–∏–∫–∞': [
        /–∞–∫–±\b/i,
        /–∞–∫—É–º—É–ª—è—Ç–æ—Ä\w*/i,
        /—Å—Ç–∞—Ä—Ç–µ—Ä\w*/i,
        /–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä\w*/i,
        /–µ–ª–µ–∫—Ç—Ä–∏–∫/i,
        /–ø—Ä–æ–≤–æ–¥\w*/i,
        /—Ä–µ–ª–µ/i,
        /–±–ª–æ–∫\s*–∫–µ—Ä—É–≤–∞–Ω–Ω—è/i,
        /–±–∫—É/i,
        /–¥–∞—Ç—á–∏–∫\w*/i,
        /—Å–≤—ñ—á–∫\w*/i,
        /–∑–∞–ø–∞–ª—é–≤–∞–Ω–Ω—è/i,
        /–∫–∞—Ç—É—à–∫/i,
        /–º–æ–¥—É–ª—å/i,
        /–∫–æ–º—É—Ç–∞—Ç–æ—Ä/i,
        /–µ–±—É/i,
        /–ø—Ä–æ—à–∏–≤/i,
        /–∫–æ–º–ø\b/i,
        /–ø—Ä–æ–≥—Ä–∞–º/i,
        /–µ–ª–µ–∫—Ç—Ä–æ/i,
        /–ø—Ä–æ–≤–æ–¥–∫–∞/i,
        /—ç–ª–µ–∫—Ç—Ä–∏–∫–∞/i,
        /–∑–∞–∂–∏–≥–∞–Ω–∏–µ/i
    ],
    
    '–¢—Ä–∞–Ω—Å–º—ñ—Å—ñ—è': [
        /–∫–æ—Ä–æ–±–∫/i,
        /–∫–ø–ø/i,
        /—Ç—Ä–∞–Ω—Å–º—ñ—Å/i,
        /–∑—á–µ–ø–ª–µ–Ω–Ω—è/i,
        /—Å—Ü–µ–ø–ª–µ–Ω/i,
        /–¥–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–∞–ª/i,
        /–ø—Ä–∏–≤—ñ–¥/i,
        /—à–∞—Ä–Ω—ñ—Ä/i,
        /–∫–∞—Ä–¥–∞–Ω/i,
        /—Ä–µ–¥—É–∫—Ç–æ—Ä/i,
        /—Ä–∞–∑–¥–∞—Ç–æ—á/i,
        /–º—É—Ñ—Ç/i,
        /—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è/i,
        /–∫–æ—Ä–æ–±–∫–∞/i,
        /–ø–µ—Ä–µ–¥–∞—á/i,
        /—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è/i,
        /—Å—Ü–µ–ø–ª–µ–Ω–∏–µ/i,
        /—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è/i
    ],
    
    '–ö—É–∑–æ–≤ —Ç–∞ —Å–∞–ª–æ–Ω': [
        /–∫—É–∑–æ–≤/i,
        /—Ñ–∞—Ä\w*/i,
        /–¥–∑–µ—Ä–∫–∞–ª/i,
        /—Å–∫–ª–æ/i,
        /–≤—ñ—Ç—Ä–æ–≤–µ/i,
        /—Å–∏–¥—ñ–Ω–Ω—è/i,
        /–æ–±–±–∏–≤–∫/i,
        /–∫–æ–Ω–¥–∏—Ü—ñ–æ–Ω–µ—Ä/i,
        /–æ–ø–∞–ª–µ–Ω–Ω—è/i,
        /–ø–µ—á–∫–∞/i,
        /–æ–±—ñ–≥—Ä—ñ–≤/i,
        /–ª—é–∫/i,
        /–¥–≤–µ—Ä/i,
        /–∫–∞–ø–æ—Ç/i,
        /–±–∞–≥–∞–∂–Ω–∏–∫/i,
        /–±–∞–º–ø–µ—Ä/i,
        /—Å–∞–ª–æ–Ω/i,
        /–∫—É–∑–æ–≤–Ω–æ–π/i,
        /–¥–≤–µ—Ä—å/i,
        /–∑–µ—Ä–∫–∞–ª–æ/i,
        /—Ñ–∞—Ä—ã/i,
        /—Å—Ç–µ–∫–ª–æ/i,
        /–ª–æ–±–æ–≤–æ–µ/i
    ],
    
    '–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ö–ª–æ–ø—É': [
        /–≥–ª—É—à—ñ–Ω/i,
        /–≤–∏—Ö–ª–æ–ø/i,
        /–≥–ª—É—à–∏—Ç–µ–ª—å/i,
        /–≤—ã—Ö–ª–æ–ø/i,
        /–∫–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä/i,
        /—Å–∞–∂–µ–≤–∏–π/i,
        /—Å–∞–∂\w*/i,
        /–ø—Ä–æ–∂–∏–≥/i,
        /—Å–∞–∂–µ–≤—ã–π/i,
        /–≤—ã–ø—É—Å–∫/i,
        /–≥–ª—É—à–∏–ª–∫–∞/i,
        /—Å–∞–∂–µ–≤–∏–∫/i
    ],
    
    '–í–∏—Ç—Ä–∞—Ç–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏': [
        /–æ—á–∏—Å–Ω–∏–∫/i,
        /–ø—Ä–∞–ª—å–Ω/i,
        /–∞–Ω—Ç–∏—Ñ—Ä–∏–∑/i,
        /—Ç–æ—Å–æ–ª/i,
        /–æ–º—ñ–≤–∫–∞/i,
        /—Å–∫–ª–æ–æ–º—ñ–≤/i,
        /—Ä—ñ–¥–∏–Ω/i,
        /–º–∞—Å—Ç–∏–ª/i,
        /—Å–ø—Ä–µ–π/i,
        /–≥–µ—Ä–º–µ—Ç–∏–∫/i,
        /–∫–ª–µ–π/i,
        /–ø–∞—Å—Ç–∞/i,
        /—Å–º–∞–∑–∫/i,
        /–ø–æ—Ä–æ—à–æ–∫/i,
        /–∂–∏–¥–∫–æ—Å—Ç—å/i,
        /–æ—á–∏—Å—Ç–∏—Ç–µ–ª—å/i,
        /–ø—Ä–æ–º—ã–≤–∫–∞/i,
        /—Å–º–∞–∑–∫–∞/i,
        /–≥–µ—Ä–º–µ—Ç–∏–∫/i
    ],
    
    '–ú–∏–π–∫–∞ –∞–≤—Ç–æ': [
        /–º–∏–π–∫–∞/i,
        /–º–æ–π–∫–∞/i,
        /–ø–æ–ª—ñ—Ä—É–≤–∞–Ω–Ω—è/i,
        /–ø–æ–ª—ñ—Ä–æ–≤–∫–∞/i,
        /—á–∏—Å—Ç–∫–∞/i,
        /–º–æ–π–∫–∏/i,
        /–º–∏–π–∫–∏/i,
        /–ø–æ–ª–∏—Ä–æ–≤–∫–∞/i,
        /–º–æ–π—â–∏–∫/i,
        /–º–æ–π—â–∏—Ü–∞/i
    ],
    
    '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏': [
        // –¶—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ø–æ—Ä–æ–∂–Ω—å–æ—é - —Ü–µ fallback –∫–∞—Ç–µ–≥–æ—Ä—ñ—è
        // –¥–ª—è –∑–∞–ø–∏—Å—ñ–≤, —è–∫—ñ –Ω–µ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –ø—ñ–¥ –∂–æ–¥–Ω—É –∑ —ñ–Ω—à–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    ]
};

// –ï–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É
window.EXPENSE_CATEGORIES_CONFIG = EXPENSE_CATEGORIES;

// –î–æ–¥–∞—Ç–∫–æ–≤—ñ —É—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏
window.EXPENSE_CATEGORIES_UTILS = {
    // –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    getAllCategories: function() {
        return Object.keys(EXPENSE_CATEGORIES);
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ—à—É–∫—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –∑–∞ –æ–ø–∏—Å–æ–º
    findCategory: function(description) {
        if (!description || typeof description !== 'string') {
            return '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏';
        }
        
        const desc = description.toLowerCase().trim();
        
        // –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –≤–∏–ø–∞–¥–∫–∏ –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—ñ
        if (desc.includes('–¥–∏—Å–∫')) {
            if (desc.includes('–∫–æ–ª–µ—Å') || desc.includes('—à–∏–ø') || desc.includes('–ª–∏—Ç–∏–π') || desc.includes('—à—Ç–∞–º–ø')) {
                return '–•–æ–¥–æ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞';
            }
            if (desc.includes('–≥–∞–ª—å–º') || desc.includes('—Ç–æ—Ä–º–æ–∑')) {
                return '–ì–∞–ª—å–º—ñ–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞';
            }
        }
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –≤ –ø–æ—Ä—è–¥–∫—É –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É
        const priorityOrder = [
            '–ì–∞–ª—å–º—ñ–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞',    // –ù–∞–π–≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç - –±–µ–∑–ø–µ–∫–∞
            '–¢–û —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è', // –¢–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î –ì–†–ú
            '–î–≤–∏–≥—É–Ω',
            '–¢—Ä–∞–Ω—Å–º—ñ—Å—ñ—è',
            '–•–æ–¥–æ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞',
            '–ï–ª–µ–∫—Ç—Ä–∏–∫–∞',
            '–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ö–ª–æ–ø—É',
            '–ö—É–∑–æ–≤ —Ç–∞ —Å–∞–ª–æ–Ω',
            '–ú–∏–π–∫–∞ –∞–≤—Ç–æ',
            '–í–∏—Ç—Ä–∞—Ç–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏'
        ];
        
        for (const category of priorityOrder) {
            const patterns = EXPENSE_CATEGORIES[category];
            if (patterns && patterns.length > 0) {
                for (const pattern of patterns) {
                    if (pattern.test(desc)) {
                        return category;
                    }
                }
            }
        }
        
        return '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏';
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –æ–ø–∏—Å—É
    analyzeDescription: function(description) {
        if (!description || typeof description !== 'string') {
            return {
                category: '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏',
                matches: [],
                reason: '–ü—É—Å—Ç–∏–π –∞–±–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π –æ–ø–∏—Å'
            };
        }
        
        const desc = description.toLowerCase().trim();
        const matches = [];
        
        // –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –∑–±—ñ–≥–∏
        for (const [category, patterns] of Object.entries(EXPENSE_CATEGORIES)) {
            for (const pattern of patterns) {
                if (pattern.test(desc)) {
                    const matchText = desc.match(pattern)?.[0] || pattern.toString();
                    matches.push({
                        category: category,
                        pattern: pattern.toString(),
                        matchedText: matchText,
                        priority: this.getCategoryPriority(category)
                    });
                }
            }
        }
        
        // –°–æ—Ä—Ç—É—î–º–æ –∑–∞ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º
        matches.sort((a, b) => b.priority - a.priority);
        
        // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ñ—ñ–Ω–∞–ª—å–Ω—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é
        let finalCategory = '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏';
        if (matches.length > 0) {
            finalCategory = matches[0].category;
        }
        
        return {
            description: description,
            category: finalCategory,
            matches: matches,
            matchCount: matches.length,
            topMatches: matches.slice(0, 3)
        };
    },
    
    // –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
    getCategoryPriority: function(categoryName) {
        const priorities = {
            '–ì–∞–ª—å–º—ñ–≤–Ω–∞ —Å–∏—Å—Ç–µ–º–∞': 100,
            '–¢–û —Ç–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è': 90,
            '–î–≤–∏–≥—É–Ω': 80,
            '–¢—Ä–∞–Ω—Å–º—ñ—Å—ñ—è': 70,
            '–•–æ–¥–æ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞': 60,
            '–ï–ª–µ–∫—Ç—Ä–∏–∫–∞': 50,
            '–°–∏—Å—Ç–µ–º–∞ –≤–∏—Ö–ª–æ–ø—É': 40,
            '–ö—É–∑–æ–≤ —Ç–∞ —Å–∞–ª–æ–Ω': 30,
            '–ú–∏–π–∫–∞ –∞–≤—Ç–æ': 20,
            '–í–∏—Ç—Ä–∞—Ç–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏': 10,
            '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏': 0
        };
        
        return priorities[categoryName] || 0;
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–∏–Ω–∞–º—ñ—á–Ω–æ
    addCategory: function(categoryName, keywords) {
        if (!EXPENSE_CATEGORIES[categoryName]) {
            EXPENSE_CATEGORIES[categoryName] = [];
        }
        
        keywords.forEach(keyword => {
            if (keyword.startsWith('/') && keyword.endsWith('/')) {
                // –†–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑
                const regexStr = keyword.slice(1, -1);
                try {
                    const regex = new RegExp(regexStr, 'i');
                    EXPENSE_CATEGORIES[categoryName].push(regex);
                } catch (e) {
                    console.error(`–ü–æ–º–∏–ª–∫–∞ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤–∏—Ä–∞–∑—ñ: ${keyword}`, e);
                }
            } else {
                // –ü—Ä–æ—Å—Ç–∏–π —Ç–µ–∫—Å—Ç
                const escapedKeyword = keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp(escapedKeyword, 'i');
                EXPENSE_CATEGORIES[categoryName].push(regex);
            }
        });
        
        // –û–Ω–æ–≤–ª—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É
        window.EXPENSE_CATEGORIES_CONFIG = EXPENSE_CATEGORIES;
        console.log(`‚úÖ –ö–∞—Ç–µ–≥–æ—Ä—ñ—è "${categoryName}" –æ–Ω–æ–≤–ª–µ–Ω–∞. –ö–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤: ${EXPENSE_CATEGORIES[categoryName].length}`);
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
    removeCategory: function(categoryName) {
        if (categoryName !== '–Ü–Ω—à—ñ –≤–∏—Ç—Ä–∞—Ç–∏' && EXPENSE_CATEGORIES[categoryName]) {
            delete EXPENSE_CATEGORIES[categoryName];
            window.EXPENSE_CATEGORIES_CONFIG = EXPENSE_CATEGORIES;
            console.log(`üóëÔ∏è –ö–∞—Ç–µ–≥–æ—Ä—ñ—è "${categoryName}" –≤–∏–¥–∞–ª–µ–Ω–∞`);
        }
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    testDescription: function(description) {
        return this.analyzeDescription(description);
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤—Å—ñ—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
    getCategoryStats: function() {
        const stats = {};
        let totalPatterns = 0;
        
        for (const [category, patterns] of Object.entries(EXPENSE_CATEGORIES)) {
            stats[category] = {
                patternCount: patterns.length,
                samplePatterns: patterns.slice(0, 3).map(p => {
                    // –ü—Ä–∏–±–∏—Ä–∞—î–º–æ /.../ –∑ —Ä–µ–≥—É–ª—è—Ä–Ω–∏—Ö –≤–∏—Ä–∞–∑—ñ–≤ –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ
                    const str = p.toString();
                    return str.substring(1, str.length - 2);
                })
            };
            totalPatterns += patterns.length;
        }
        
        stats._meta = {
            totalCategories: Object.keys(EXPENSE_CATEGORIES).length,
            totalPatterns: totalPatterns
        };
        
        return stats;
    },
    
    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ—à—É–∫—É –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤
    searchKeywords: function(searchText) {
        const results = [];
        const searchLower = searchText.toLowerCase();
        
        for (const [category, patterns] of Object.entries(EXPENSE_CATEGORIES)) {
            for (const pattern of patterns) {
                const patternStr = pattern.toString().toLowerCase();
                if (patternStr.includes(searchLower)) {
                    results.push({
                        category: category,
                        pattern: pattern.toString()
                    });
                }
            }
        }
        
        return results;
    }
};

console.log('‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –≤–∏—Ç—Ä–∞—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞');
console.log(`üìä –î–æ—Å—Ç—É–ø–Ω–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π: ${Object.keys(EXPENSE_CATEGORIES).length}`);

// –û—Ç—Ä–∏–º—É—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
const stats = window.EXPENSE_CATEGORIES_UTILS.getCategoryStats();
console.log(`üî§ –í—Å—å–æ–≥–æ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤: ${stats._meta.totalPatterns}`);

// –¢–µ—Å—Ç–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (–∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –ì–†–ú)
console.log('\nüß™ –¢–µ—Å—Ç–æ–≤—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–±\'—î–¥–Ω–∞–Ω–Ω—è –ì–†–ú):');
const testExamples = [
    '–†–µ–º—ñ–Ω—å –ì–†–ú —Ç–∞ —Ä–æ–ª–∏–∫–∏',
    '–ü–æ–º–ø–∞ –æ—Ö–æ–ª–æ–¥–∂–µ–Ω–Ω—è',
    '–ó–∞–º—ñ–Ω–∞ –º–∞—Å–ª–∞ —Ç–∞ —Ñ—ñ–ª—å—Ç—Ä–∞',
    '–ì–∞–ª—å–º—ñ–≤–Ω—ñ –∫–æ–ª–æ–¥–∫–∏ –ø–µ—Ä–µ–¥–Ω—ñ',
    '–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ö–æ–¥–æ–≤–æ—ó',
    '–®–∏–Ω–∏ –∑–∏–º–æ–≤—ñ',
    '–†–æ–∑–≤–∞–ª-—Å—Ö–æ–¥–∂–µ–Ω–Ω—è',
    '–ê–∫—É–º—É–ª—è—Ç–æ—Ä',
    '–ó—á–µ–ø–ª–µ–Ω–Ω—è'
];

testExamples.forEach(example => {
    const result = window.EXPENSE_CATEGORIES_UTILS.findCategory(example);
    const analysis = window.EXPENSE_CATEGORIES_UTILS.analyzeDescription(example);
    console.log(`‚Ä¢ "${example}"`);
    console.log(`  ‚Üí –ö–∞—Ç–µ–≥–æ—Ä—ñ—è: ${result}`);
    if (analysis.topMatches && analysis.topMatches.length > 0) {
        console.log(`  ‚Üí –ó–±—ñ–≥–∏: ${analysis.topMatches.map(m => `${m.matchedText} (${m.category})`).join(', ')}`);
    }
    console.log('');
});

console.log('üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è—Ö:');
for (const [category, data] of Object.entries(stats)) {
    if (category !== '_meta') {
        console.log(`  ‚Ä¢ ${category}: ${data.patternCount} –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤`);
    }
}

console.log('\nüîß –î–æ—Å—Ç—É–ø–Ω—ñ –º–µ—Ç–æ–¥–∏:');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.findCategory("–æ–ø–∏—Å") - —à–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.analyzeDescription("–æ–ø–∏—Å") - –¥–µ—Ç–∞–ª—å–Ω–∏–π –∞–Ω–∞–ª—ñ–∑');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.testDescription("–æ–ø–∏—Å") - —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.getCategoryStats() - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ–π');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.addCategory(...) - –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–∞—Ç–µ–≥–æ—Ä—ñ—é');
console.log('‚Ä¢ EXPENSE_CATEGORIES_UTILS.searchKeywords("—Å–ª–æ–≤–æ") - –ø–æ—à—É–∫ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤');